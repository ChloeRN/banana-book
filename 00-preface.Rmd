# Preface {-}

## Why this book? {-}

**What capture-recapture data and models are, and why used for. What out nice Johnny Ball's video. History of capture-recapture. Fields of application. Flexibility of HMM to decompose complex problems in small pieces that are easier to understand, model and analyse. From satallite guidance to endangered species conservation. And why Bayes? Also three of my fav research ingredients, nice cocktail to have together.**

## Who should read this book? {-}

This book is aimed at beginners who're comfortable using R and write basic code (including loops), as well as connoisseurs of capture-recapture who'd like to tap into the power of the Bayesian side of statistics. For both audiences, thinking in the HMM framework should help in building models and make the most of your capture-recapture data. 

## What will you learn? {-}

The book is divided into two parts, theory and case studies. **Description of chapters to be done.**

## What won't you learn? {-}

Hardly any maths. Don't cover Bayesian statistics, or even HMM fully, just what you need to work with capture-recapture data. If interested in more, hopefully the section Suggested reading will put you in the right direction. There are also a number of important topics specific to capture-recapture that I don't cover, including the closed-population capture-recapture models, and spatial capture-recapture models. These models can be trated as HMMs, but for now the usual formulation is just fine (King et al and other books for Bayes closed-pop, and Royle et al. for SCR). **To be completed.**

## Prerequisites {-}

This book uses primarily the R package NIMBLE, so you need to install at least R and NIMBLE. A bunch of other R packages are used. You can install them all at once by running:

```{r, echo = FALSE, cache = FALSE}
deps <- desc::desc_get_deps()
pkgs <- sort(deps$package[deps$type == "Imports"])
pkgs2 <- strwrap(paste(encodeString(pkgs, quote = '"'), collapse = ", "), exdent = 2)
install <- paste0(
  "install.packages(c(\n  ", 
  paste(pkgs2, "\n", collapse = ""), 
  "))"
)
```

```{r code = install, eval = FALSE}
```

## Acknowledgements {-}

**This book was written in the open and chapters were advertised on twitter when complete. Read drafts, fixed typos, and suggested improvements. I'm deeply grateful for their help.**

## How this book was written {-}

I am writing this book in [RStudio](http://www.rstudio.com/ide/) using [bookdown](http://bookdown.org/). The [book website](https://oliviergimenez.github.io/banana-book) is hosted with [GitHub Pages](https://pages.github.com/), and automatically updated after every push by [Github Actions](https://github.com/features/actions). The source is available from [GitHub](https://github.com/oliviergimenez/banana-book).

The version of the book you're reading was built with `r R.version.string` and the following packages:

```{r, echo = FALSE, results="asis"}
pkgs <- sessioninfo::package_info(pkgs, dependencies = FALSE)
df <- tibble(
  package = pkgs$package,
  version = pkgs$ondiskversion,
  source = gsub("@", "\\\\@", pkgs$source)
)
knitr::kable(df, format = "markdown")
```

```{r, echo = FALSE}
ruler <- function(width = getOption("width")) {
  x <- seq_len(width)
  y <- dplyr::case_when(
    x %% 10 == 0 ~ as.character((x %/% 10) %% 10),
    x %% 5 == 0  ~ "+",
    TRUE         ~ "-"
  )
  cat(y, "\n", sep = "")
  cat(x %% 10, "\n", sep = "")
}
```

```{r, include = FALSE}
ruler()
```
